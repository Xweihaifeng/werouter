window.DTJSBridge=(function(){var a="dttracker";var e="DTTracker";var c=false;var b=1;function d(){var h=window.navigator.userAgent.split(" ");for(var g=0;g<h.length;g++){if(h[g].indexOf(e)==0){c=true;var f=e.length;if(f<h[g].length){b=h[g].slice(f)}}}}d();return{callbackMap:{},scheme:a,isNativeSDKEnv:c,nativeSDKVersion:b,getAPPIDs:function(f){if(!this.isNativeSDKEnv){f(undefined)}else{this.callNative("appids",{},f)}},getURL:function(i,h){var f=[];for(var g in h){if(h.hasOwnProperty(g)){f.push(g+"="+encodeURIComponent(h[g]))}}return this.scheme+"://"+i+"?"+f.join("&")},callNative:function(k,h,j){var f=this.generateRandomNameForCallback(j);this.callbackMap[f]=j;h["callback"]=f;var g=this.getURL(k,h);var i=document.createElement("iframe");i.style.display="none";i.src=g;document.documentElement.appendChild(i);setTimeout(function(){document.documentElement.removeChild(i)},0)},callJS:function(g,h){var f="success";var i=this.callbackMap[h];if(i){i(JSON.parse(g));this.callbackMap[h]=undefined}else{f="fail"}return f},generateRandomNameForCallback:function(g){var f=g.name;if(!f){f="anonymous_bridge_callback"}if(!this.generateRandomNameForCallback.func_count){this.generateRandomNameForCallback.func_count=0}this.generateRandomNameForCallback.func_count++;f+="_"+this.generateRandomNameForCallback.func_count;return f}}})();(function(){var m={};var e={};var c="recv.log.dtstack.com";var h=null;if(!Date.prototype.toISOString){(function(){function o(p){if(p<10){return"0"+p}return p}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+o(this.getUTCMonth()+1)+"-"+o(this.getUTCDate())+"T"+o(this.getUTCHours())+":"+o(this.getUTCMinutes())+":"+o(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1000).toFixed(3).slice(2,5)+"Z"}}())}m.cookie={get:function(p){var r=p+"=";var o=document.cookie.split(";");for(var q=0;q<o.length;q++){var s=o[q];while(s.charAt(0)==" "){s=s.substring(1,s.length)}if(s.indexOf(r)==0){return decodeURIComponent(s.substring(r.length,s.length))}}return null},parse:function(o){var p;try{p=m.JSONDecode(m.cookie.get(o))||{}}catch(q){}return p},set:function(p,x,y,w,t){var q="",r="",o="";if(w){var v=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=v?v[0]:"";q=((u)?"; domain=."+u:"")}if(y){var s=new Date();s.setTime(s.getTime()+(y*24*60*60*1000));r="; expires="+s.toGMTString()}if(t){o="; secure"}document.cookie=p+"="+encodeURIComponent(x)+r+"; path=/"+q+o},remove:function(p,o){m.cookie.set(p,"",-1,o)}};m.isPhone=function(){return navigator.userAgent.match(/(iPhone|iPod|Android|ios|SymbianOS)/i)};m.UUID=(function(){var o=function(){var s=1*new Date(),r=0;while(s==1*new Date()){r++}return s.toString(16)+r.toString(16)};var q=function(){return Math.random().toString(16).replace(".","")};var p=function(x){var v=navigator.userAgent,u,w,s=[],t=0;function r(y,z){var A,B=0;for(A=0;A<z.length;A++){B|=(s[A]<<A*8)}return y^B}for(u=0;u<v.length;u++){w=v.charCodeAt(u);s.unshift(w&255);if(s.length>=4){t=r(t,s);s=[]}}if(s.length>0){t=r(t,s)}return t.toString(16)};return function(){var r=(screen.height*screen.width).toString(16);return(o()+"-"+q()+"-"+p()+"-"+r+"-"+o())}})();m.localStorage={error:function(o){console.error("localStorage error: "+o)},get:function(o){try{return window.localStorage.getItem(o)}catch(p){m.localStorage.error(p)}return null},parse:function(o){try{return m.JSONDecode(m.localStorage.get(o))||{}}catch(p){}return null},set:function(o,q){try{window.localStorage.setItem(o,q)}catch(p){m.localStorage.error(p)}},remove:function(o){try{window.localStorage.removeItem(o)}catch(p){m.localStorage.error(p)}}};function j(){if(m.cookie.get("dta_token")){e.code=m.cookie.get("dta_token");c=m.cookie.get("dta_apihost");e.logtype="browser"}else{return}if(m.cookie.get("DTAUSRID")||m.localStorage.get("DTAUSRID")){e.uuid=m.cookie.get("DTAUSRID")||m.localStorage.get("DTAUSRID")}else{if(m.isPhone()){DTJSBridge.getAPPIDs(function(p){p?e.uuid=p.identityID:e.uuid=m.UUID()})}else{e.uuid=m.UUID()}m.cookie.set("DTAUSRID",e.uuid,180,true,true);m.localStorage.set("DTAUSRID",e.uuid)}if(k()){e.dta_session_id=m.UUID();m.cookie.set("DTASESSIONID",e.dta_session_id,180,true,true);m.localStorage.set("DTASESSIONID",e.dta_session_id)}else{e.dta_session_id=m.cookie.get("DTASESSIONID")||m.localStorage.get("DTASESSIONID")}if(document){e.url=i(document.URL)||"";e.title=document.title||"";e.referrer=i(document.referrer)||""}if(window&&window.screen){e.sh=window.screen.height||0;e.sw=window.screen.width||0;e.cd=window.screen.colorDepth||0}if(navigator){e.lang=navigator.language||"";e.platform=navigator.platform||""}if(_maq){for(var o in _maq){switch(_maq[o][0]){case"_setAccount":e.account=_maq[o][1];break;case"_setCustomVar":e[_maq[o][1]]=_maq[o][2];break;default:break}}}}_maq.trigger=function(o){switch(o[0]){case"_trackEvent":e.triggerType="action";var q=e;o.shift();q.event=o.join(",");b(l(q));break;default:break}};function a(o){return encodeURIComponent(o)}function i(o){return decodeURIComponent(o)}function n(){return location.protocol
}function k(){var p=document.referrer;var q=document.domain;if(p!=""){var o=document.referrer.split("/")[2];if(o.indexOf(q)>-1){if(m.cookie.get("DTASESSIONID")||m.localStorage.get("DTASESSIONID")){return false}else{return true}}else{return true}}else{return true}}function l(q){var o="";for(var p in q){if(o!=""){o+="&"}o+=p+"="+a(q[p])}return o}function b(p,s){p+="&timestamp="+new Date().toISOString();var o=new Image(1,1);o.onload=function(){if(typeof s==="function"){s()}};var r=n();var q=null;if(r=="http:"){q=r+"//"+c+"/dta?"+p}if(r=="https:"){q=r+"//"+c+"/dtas?"+p}o.src=q}function f(){j();e.triggerType="enter";h=new Date().getTime();b(l(e))}if(d()){g(window,"pagehide",function(){var o=new Date().getTime();e.triggerType="leave";e.stayTime=o-h;b(l(e))},false)}else{g(window,"beforeunload",function(){var o=new Date().getTime();e.triggerType="leave";e.stayTime=o-h;b(l(e))},false)}function g(p,t,q,o){if(p.addEventListener){p.addEventListener(t,q,o);return true}else{if(p.attachEvent){var s=p.attachEvent("on"+t,q);return s}else{p["on"+t]=q}}}function d(){var o=navigator.userAgent;return !!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}f()})();