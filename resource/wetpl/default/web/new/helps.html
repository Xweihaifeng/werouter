<#include#>header_include.html</#include#>
<script type="text/javascript">
    var main_index = false;
</script>
<link rel="stylesheet" href="/common/css/helps.css" />
<script src="/common/js/helps.js"></script>
<div id="app">
    <section class="bnaner">
        <div class="nav">
            <div class="main" id="fff">

            </div>
        </div>
    </section>

    <section class="content">
        <div class="toptop">
            <main>
                <ul class="content_left pps">
                    <li>
                        <span>快速入门</span>
                    </li>
                    <li>
                        <span>基础知识</span>
                    </li>
                    <li>
                        <span>应用扩展</span>
                    </li>
                    <li>
                        <span>统计报告</span>
                    </li>
                    <li>
                        <span>其他设置</span>
                    </li>
                    <li>
                        <span>帮助中心</span>
                    </li>
                </ul>
            </main>

        </div>
        <main>
            <div class="boxb">
                <ul class="content_left diss">
                    <li>
                        <span>快速入门</span>
                    </li>
                    <li>
                        <span>基础知识</span>
                    </li>
                    <li>
                        <span>应用扩展</span>
                    </li>
                    <li>
                        <span>统计报告</span>
                    </li>
                    <li>
                        <span>其他设置</span>
                    </li>
                    <li>
                        <span>帮助中心</span>
                    </li>
                </ul>
            </div>

            <div class="content_right">
                <ul>
                    <li>
                        <div class="about_title">
                            <span>合作伙伴</span>
                        </div>
                        <ul>
                            <li v-for="item in datas">
                                <a :href="'/news/'+item.weid">{{item.title}}</a>
                            </li>
                        </ul>
                    </li>
                </ul>

            </div>
        </main>
    </section>
</div>

<script>
    new Vue({
        el: '#app',
        data: {
            'header_news': [],
            'currPage' : window.location.pathname.split('/').pop(),
            'channel' : '' ,
            'channel_name' : '',
            'list_data' : [],
            'show':true,
            'empty_show':false,
            'page':1,
            'datas':'',
        },
        mounted() {
            // this.getdata()
            this.$nextTick( function () {
                this.header_news = win.getStorage('header_help');
                for(val in this.header_news){
                    if(this.header_news[val].domain == this.currPage){
                        this.channel = this.header_news[val].domain;
                        this.channel_name = this.header_news[val].title;
                        set_title(this.channel_name);
                        this.get_data(this.channel , 1);
                    }
                }
            });
        },
        methods:{
            // getdata:function () {
            //     ajax.get(web_business.web_cms_channel_contents , {params:{cate_id:'help' , limit : 2 , page : 1}}).then((res)=>{
            //         this.content = res.data;
            //         console.log(this.content,1111)
            //     });
            //     // fetch(web_business.web_cms_channel_categories,{params:{cate_id:cate_id , limit : 10 , 'page' : this.page}}).then(console.log(res))
            // },
            get_data : function(cate_id){
                ajax.get(web_business.web_cms_channel_contents , {params:{cate_id:cate_id , limit : 10 , 'page' : this.page}}).then((res)=>{
                    this.list_data = res.data;
                    this.datas = res.data.list;
                    console.log(res.data,31321321)
                    if(this.list_data.total == 0 && this.page == 1){
                        this.empty_show = true;
                    }
                    var list = this.list_data.list;
                    for(val in list){
                        var time = (new Date(list[val].publish_time)).getTime();
                        var time_list = new Date(time);
                        list[val].time_year = time_list.getFullYear();
                        list[val].time_data = time_list.getMonth()+'-'+time_list.getDate();
                        list[val].href = '/news/'+list[val].weid;
                        list[val].img = settings+list[val].thumb_image;
                    }
                    console.log(this.datas,13213)
                    this.show = false;
                });
            }
        }
    })
</script>
<#include#>footer_include.html</#include#>