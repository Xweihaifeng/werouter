<!DOCTYPE html>
<html>
<head lang="en">
    <title></title>
    <meta charset="UTF-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <link rel="shortcut icon" id="favicon" href="" />
    <link rel="stylesheet" href="/common/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{PATH_TML}}css/swiper.min.css">
    <link rel="stylesheet" href="/common/layui/css/layui.css">
    <link rel="stylesheet" href="{{PATH_TML}}css/normalize.css" />
    <link rel="stylesheet" href="{{PATH_TML}}css/index.css" />
    <link rel="stylesheet" href="{{PATH_TML}}css/index_new.css" />
    <script src="/common/js/vue.min.js"></script>
    <script src="/common/js/axios.min.js"></script>
    <script src="/common/js/jquery-3.2.1.min.js"></script>
    <script src="/common/js/swiper-3.3.1.min.js"></script>
    <script src="/common/layui/layui.js"></script>
    <script src="{{PATH_CONFIG}}"></script>
</head>
<body>
<main id="app" v-cloak>
    <header>
        <div>
            <ul>
                <li><img src="/common/img/logo-so.png" alt=""/></li>
                <li><img src="/common/img/logo-title-info.png" alt=""/></li>
                <li>
                    <div id="ht">
                        <aside>
                            <span>手机版</span>
                            <div style="display: none;">
                                <img src="http://www.qqxqs.com/api//file/qrcode?margin=2&amp;url=http://m.qqxqs.com" class="weixin img-responsive">
                            </div>
                        </aside>
                        <aside>
                            <span>微信</span>
                            <div style="display: none;">
                                <img src="http://images.wezchina.com/plats/resource/1514518034252.png" alt="">
                            </div>
                        </aside>
                        <aside>
                            <span>微博</span>
                            <div style="display: none;">
                                <img src="http://images.wezchina.com/plats/resource/1514518042947.png" alt="">
                            </div>
                        </aside>
                        <aside><a href="https://www.wezchina.com" target="_blank" id="old"><span style="border-right:none;padding-left:12px;">访问旧版</span></a></aside>
                    </div>
                    <div id="hs">
                        <span><input type="text" id="search" class="form-control" placeholder="请输入关键字"></span>
                        <span><img src="/common/img/find.png" style="padding: 7px"></span>
                        <span>高级搜索</span>
                    </div>
                </li>
            </ul>
        </div>
        <div id="menu">
            <ol>
                <li>秦商总会</li>
                <span></span>
                <li>商会新闻</li>
                <span></span>
                <li>秦商活动</li>
                <span></span>
                <li>秦商风采</li>
                <span></span>
                <li>项目互助</li>
                <span></span>
                <li>资源共享</li>
                <span></span>
                <li>加入商会</li>
            </ol>
        </div>
    </header>
    <div id="container">
        <div id="carousel">
            <ul id="nav">
               <li><img src="/common/img/new/icon01.png" alt=""/></li>
               <li><img src="/common/img/new/icon02.png" alt=""/></li>
               <li><img src="/common/img/new/icon03.png" alt=""/></li>
               <li><img src="/common/img/new/icon04.png" alt=""/></li>
               <li><img src="/common/img/new/icon05.png" alt=""/></li>
               <li><img src="/common/img/new/icon06.png" alt=""/></li>
            </ul>
            <div class="swiper-container" id="my-swiper">
                <div class="swiper-wrapper" v-for="e in header2.list">
                    <div class="swiper-slide">
                        <img :src="imgSet(e.image, 1200, 476)" alt=""/>
                        <p class="bg"></p>
                        <p class="content">{{e.title}}</p>
                        <!--<p class="content">第七届全球秦商大会成功召开</p>-->
                    </div>
                </div>
                <div class="swiper-pagination"></div>
            </div>
        </div>
        <div id="news">
            <ul id="news-blocks">
                <li class="news-block">
                    <div class="swiper-container" id="my-swiper-2">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <img src="/common/img/new/c01.png" alt=""/>
                                <p class="bg2"></p>
                                <p class="content2">2017年度秦商全球影响力人物评选网络投票启动</p>
                            </div>
                            <div class="swiper-slide" v-for="e in banners.list">
                                <img :src="imgSet(e.image, 581, 321)" alt=""/>
                                <p class="bg2"></p>
                                <p class="content2">{{e.title}}</p>
                            </div>
                        </div>
                    </div>
                    <div id="recommend">
                        <div class="rcd-bt">
                            <div class="tb" :style="is_bg.up.bg" @mouseenter="read('up')">特别推荐
                                <div class="triangle-right" :style="is_bg.up.tri"></div>
                            </div>
                            <div class="hy" :style="is_bg.down.bg" @mouseenter="read('down')">会员推荐
                                <div class="triangle-right-1" :style="is_bg.down.tri"></div>
                            </div>
                            <div class="circle-tb" :style="is_bg.up.cir" @mouseenter="read('up')">
                                <div class="sm-circle-tb" :style="is_bg.up.sub"></div>
                            </div>
                            <div class="circle-hy" :style="is_bg.down.cir" @mouseenter="read('down')">
                                <div class="sm-circle-hy" :style="is_bg.down.sub"></div>
                            </div>
                        </div>
                        <div class="rcd-news">
                            <div class="rcd-tb" v-show="is_bg.up.on">
                                <div class="rcd-news-line" v-for="e in especial.slice(0, 4)">
                                    <div class="rcd-news-title">
                                        <a :href="e.channel_domain + '/' + e.weid" target="_blank">{{e.title | cut(18)}}</a>
                                    </div>
                                    <div class="rcd-news-date">[{{new Date(parseInt(e.created_at * 1000)) | show_date | format_date}}]</div>
                                </div>
                            </div>
                            <div class="rcd-hy" v-show="is_bg.down.on">
                                <div class="rcd-news-line" v-for="e in articles">
                                    <div class="rcd-news-title">
                                        <a :href="'/' + e.domain + '/article/' + e.weid" target="_blank">{{e.title | cut(18)}}</a>
                                    </div>
                                    <div class="rcd-news-date">[{{e.created_at.substr(0, 10)}}]</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="news-block">
                    <div class="main-news">
                        <div class="main-news-title">
                            <img src="/common/img/new/topline.png">
                            <a href="main_news.channel_domain + '/' + main_news.weid" target="_blank">{{main_news.title}}</a>
                        </div>
                        <div class="main-news-content">
                            <a href="main_news.channel_domain + '/' + main_news.weid" target="_blank">{{main_news.summary}}</a>
                        </div>
                    </div>
                    <div class="news-center">
                        <ul class="nav nav-tabs">
                            <li class="center" :style="is_border.news" @mouseenter="show('news')"><a href="news">新闻中心</a></li>
                            <li class="sirase" :style="is_border.notice" @mouseenter="show('notice')"><a href="org">公示公告</a></li>
                            <li class="release":style="is_border.weibo" @mouseenter="show('weibo')"><a>官方发布</a></li>
                        </ul>
                    </div>
                    <div class="news-link">
                        <div id="center" v-show="is_show.news">
                            <ul class="news-line" v-for="e in news.slice(0, 7)">
                                <div style="display: flex; align-items: center;">
                                    <li class="news-type">[{{e.cate_title}}]</li>
                                    <li class="news-title">
                                        <a :href="'news/' + e.weid" target="_blank">{{e.title | fixed_len(21)}}</a>
                                    </li>
                                </div>
                                <li class="news-date">
                                    {{new Date(parseInt(e.created_at * 1000)) | show_date | format_date}}
                                </li>
                            </ul>
                        </div>
                        <div id="sirase" v-show="is_show.notice">
                            <ul class="news-line" v-for="e in notice.slice(0, 7)">
                                <div style="display: flex; align-items: center;">
                                    <li class="news-type">[{{e.cate_title}}]</li>
                                    <li class="news-title">
                                        <a :href="'news/' + e.weid" target="_blank">{{e.title | fixed_len(21)}}</a>
                                    </li>
                                </div>
                                <li class="news-date">
                                    {{new Date(parseInt(e.created_at * 1000)) | show_date | format_date}}
                                </li>
                            </ul>
                        </div>
                        <div id="release" v-html="plats_info.weibo_show" v-show="is_show.weibo"></div>
                    </div>
                </li>
            </ul>
        </div>
        <div id="marquee">
            <div id="fengcai">
                <ul>
                    <li class="fc"><p class="line">秦商风采</p></li>
                    <li class="fc">更多>></li>
                </ul>
                <div class="fleft huizhang">
                    <a :href="leader.url">
                        <img :src="leader.image">
                    </a>
                    <div class="hz_font">
                        <span>{{leader.title}}</span>
                        <p style="height:20px;">商会会长</p>
                    </div>
                </div>
                <div id="marquee1" class="marqueeleft fleft" style="width:960px;">
                    <div style="width:8000px;">
                        <ul id="marquee1_1">
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m03.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                    <span>马云 </span>
                                    <p>阿里巴巴董事局主席</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m04.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                    <span> 郑永刚 </span>
                                    <p>杉杉控股董事局主席</p>
                                </div>
                                </a>
                            </li>
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m05.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                        <span> 郑永刚 </span>
                                        <p>杉杉控股董事局主席</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m06.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                        <span> 郑永刚 </span>
                                        <p>杉杉控股董事局主席</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m07.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                        <span> 郑永刚 </span>
                                        <p>杉杉控股董事局主席</p>
                                    </div>
                                </a>
                            </li>
                        </ul>
                        <ul id="marquee1_2">
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m03.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                        <span>马云 </span>
                                        <p>阿里巴巴董事局主席</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m04.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                        <span> 郑永刚 </span>
                                        <p>杉杉控股董事局主席</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m05.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                        <span> 郑永刚 </span>
                                        <p>杉杉控股董事局主席</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m06.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                        <span> 郑永刚 </span>
                                        <p>杉杉控股董事局主席</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a class="pic" href="#"><img src="/common/img/new/m07.png"></a>
                                <a href="#">
                                    <div class="hz_font hz_font2">
                                        <span> 郑永刚 </span>
                                        <p>杉杉控股董事局主席</p>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <script type="text/javascript"></script>
            </div>
        </div>
        <div id="media-center">
            <div id="hb-center">
                <div id="hbl">
                    <div>
                        <p class="line">{{spzx.head}}</p>
                        <p><a :href='spzx.domain'>更多>></a></p>
                    </div>
                    <div @click="play(spzx.source_url)" :style="style.video"><img src="/common/img/new/play.png" alt=""/></div>
                    <p class="hb1"><a :href="'v/' + spzx.weid">{{spzx.title}}</a></p>
                    <p class="hb2">{{spzx.summary}}</p>
                    <div class="hbs" v-for="e in spzx.tail">
                        <p><a :href="'v/' + e.weid">> {{e.title | cut(14)}}</a></p>
                        <p>{{new Date(parseInt(e.publish_time) * 1000) | show_date | format_date}}</p>
                    </div>
                </div>

                <div id="hbm">
                    <div>
                        <p class="line">{{mag.title}}</p>
                        <p><a :href="'/magazine/' + mag.domain">更多>></a></p>
                    </div>
                    <ul>
                        <a v-for="e in mag.list" :href="'/magazine/' + mag.domain + '/' + e.weid" target="_blank">
                            <li><img :src="imgSet(e.cover, 110, 150)"></li>
                        </a>
                    </ul>
                </div>
                <div id="hbr">
                    <div>
                        <p class="line">{{ztbd.title}}</p>
                        <p><a :href="ztbd.domain">更多>></a></p>
                    </div>
                    <ul>
                        <a v-for="e in ztbd.list" :href="'/' + ztbd.domain + '/' + e.domain" target="_blank">
                            <li><img :src="imgSet(e.thumb_image, 350, 70)" width="350" height="70"></li>
                        </a>
                    </ul>
                </div>
            </div>
        </div>
        <div id="cp-show">
            <div id="cp-inner">
                <ul>
                    <li><p class="line">{{qycp.title}}</p></li>
                    <li><a :href="qycp.domain">更多>></a></li>
                </ul>
                <div class="swiper-container" id="my-swiper-3">
                    <div class="swiper-wrapper">
                        <!--<a :href="e.source_url">-->
                            <div class="swiper-slide" v-for="e in qycp.list">
                                <img :src="imgSet(e.thumb_image, 280, 200)" alt=""/>
                                <p class="bg3"></p>
                                <p class="content3">{{e.title}}</p>
                            </div>
                        <!--</a>-->
                    </div>
                    <div class="swiper-pagination"></div>
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                </div>
            </div>
        </div>
        <div id="link">
            <p class="line"></p>
            <ul id="link-title">
                <li v-for="e in link" @click="change_link(e)" :style="e.selected">{{e.title}}</li>
            </ul>
            <ul id="link-page" v-for="e in link" v-show="e.show">
                <a v-for="o in e.list" :href="o.url" target="_blank">
                    <li :title="o.title">{{o.title | fixed_len(7) }}</li>
                </a>
            </ul>
        </div>
    </div>
    <div id="bottom1">
        <footer>
            <div class="footer-nav">
                <a href="javascript:void(0)">咨询与建议</a>
                <a href="javascript:void(0)">站点地图</a>
                <a id="contact" href="/org/contact">联系我们</a>
            </div>
            <div class="copyright" v-html="plats_info.copyright"></div>
            <div class="_ideConac">
                <img src="/common/img/gabeian.png" width="60" height="60">
            </div>
        </footer>
    </div>
</main>

<script>

    //js无缝滚动代码
    function marquee(i, direction){
        var obj = document.getElementById("marquee" + i);
        var obj1 = document.getElementById("marquee" + i + "_1");
        var obj2 = document.getElementById("marquee" + i + "_2");
        if (direction == "up"){
            if (obj2.offsetTop - obj.scrollTop <= 0){
                obj.scrollTop -= (obj1.offsetHeight + 20);
            }else{
                var tmp = obj.scrollTop;
                obj.scrollTop++;
                if (obj.scrollTop == tmp){
                    obj.scrollTop = 1;
                }
            }
        }else{
            if (obj2.offsetWidth - obj.scrollLeft <= 0){
                obj.scrollLeft -= obj1.offsetWidth;
            }else{
                obj.scrollLeft++;
            }
        }
    }

    function marqueeStart(i, direction){
        var obj = document.getElementById("marquee" + i);
        var obj1 = document.getElementById("marquee" + i + "_1");
        var obj2 = document.getElementById("marquee" + i + "_2");

        obj2.innerHTML = obj1.innerHTML;
        var marqueeVar = window.setInterval("marquee("+ i +", '"+ direction +"')", 20);
        obj.onmouseover = function(){
            window.clearInterval(marqueeVar);
        }
        obj.onmouseout = function(){
            marqueeVar = window.setInterval("marquee("+ i +", '"+ direction +"')", 20);
        }
    }

    var app = new Vue({
        el: '#app',
        data: {
            plats_info: plats_info,
            header2: [], //头图
            banners: [], //轮播
            main_news: {}, //头条
            news: [], //新闻
            notice: [], //公告
            especial: [], //特别推荐
            articles: [], //文章
            leader: [], //会长
            member: [], //会员
            qycp: [], //企业产品
            spzx: {}, //视频
            mag: [], //杂志
            ztbd: [], //专题
            link: [], //链接
            style: {
                border: {"border-bottom": "4px solid #01a7ff"},
                recmd: {on: {bg: {"color": "white", "background": "#01a7ff"}, tri: {"display": "block"}, cir: {"border": "1px solid #01A7FF"}, sub: {"border": "none", "background": "#01A7FF"}},
                        off: {bg: {"background": "none", "color": "black"}, tri: {"display": "none"}, cir: {"border": "1px solid #AFAFAF"}, sub: {"border": "1px solid #AFAFAF"}}},
                selected: {"color": "#fff", "background": "#007cd3", "font-weight": "600"},
                video: {"background": "url(/common/img/new/08.png) no-repeat center"}
            },
            is_show: {news: true, notice: false, weibo: false},
            is_border: {news: {"border-bottom": "4px solid #01a7ff"}, notice: {}, weibo: {}},
            is_bg: {up: {on: true, bg: {"color": "white", "background": "#01a7ff"}, tri: {"display": "block"}, cir: {"border": "1px solid #01A7FF"}, sub: {"border": "none", "background": "#01A7FF"}},
                    down: {on: false, bg: {"background": "none", "color": "black"}, tri: {"display": "none"}, cir: {"border": "1px solid #AFAFAF"}, sub: {"border": "1px solid #AFAFAF"}}},
            swiper: {
                direction: 'horizontal',
                loop: true,
                speed: 1000,
                autoplay : 3000,
                autoplayDisableOnInteraction : false,
                nextButton: '.swiper-button-next',
                prevButton: '.swiper-button-prev',
                grabCursor : true,
                longSwipesRatio: 0.3,
                touchRatio:1,
                observer:true,
                observeParents:true,
            }
        },
        created() {
            axios.get(CMS_ADVS).then(data => {
                //console.log(data);
                let resp = data.data.data;
                this.header2 = resp.header2;
                this.banners = resp.banners;
                this.leader = resp.leader;
                this.link = Object.values(resp.link).map(
                        (e, i) => (i == 0 ? (e.show = true, e.selected = this.style.selected, e) : (e.show = false, e.selected = {}, e)));
                setTimeout(() => {
                    var mySwiper = new Swiper('#my-swiper', {...this.swiper, pagination: '.swiper-pagination', paginationClickable :true,});
                    var mySwiper2 = new Swiper('#my-swiper-2', this.swiper);
                }, 50);
            })

            axios.get(CMS_INDEX_GRID).then(data => {
                //console.log(data.data);
                let resp = data.data.data;
                this.main_news = {...resp.hot[0],
                                    title: resp.hot[0].title.substr(0, 18),
                                    summary: resp.hot[0].summary.length > 72 ? resp.hot[0].summary.substr(0, 72) + ' ...' : resp.hot[0].summary};
                this.news = resp.news;
                this.notice = resp.nitoce;
                this.especial = resp.especial_news;
                this.qycp = resp.qycp;
                this.spzx = {head: resp.spzx.title, domain: resp.spzx.domain, ...resp.spzx.list[0], tail: resp.spzx.list.slice(1, 3)};
                this.mag = resp.mag;
                this.ztbd = resp.ztbd;
                this.style.video = this.spzx.thumb_image != ""
                                    ? {"background": "url(" + this.spzx.thumb_image + ") no-repeat center"}
                                    : {"background": "url(/common/img/new/08.png) no-repeat center"};
                setTimeout(() => {
                    var mySwiper3 = new Swiper('#my-swiper-3', {...this.swiper, slidesPerView: 4, spaceBetween: 20})
                }, 50);
            })

            axios.get(ARTICLES + "?field=domain,weid,title,cate_id,created_at").then(data => this.articles = data.data.data.list.slice(0, 4))

        },
        mounted() {
            this.$nextTick(() => {
                marqueeStart(1, "left");
            })
        },
        methods: {
            play: (url) => {
                layui.use('layer', function() {
                    var $ = layui.jquery, layer = layui.layer;
                    layer.open({
                        type: 2,
                        title: false,
                        area: ['855px', '480px'],
                        shade: 0.8,
                        closeBtn: 1,
                        shadeClose: true,
                        content: url
                    });
                })
            },
            read: name => {
                let ls = ['up', 'down'];
                ls.filter(x => x !== name).map(x =>
                    (app.is_bg[x].on = false, app.is_bg[x].bg = app.style.recmd.off.bg, app.is_bg[x].tri = app.style.recmd.off.tri,
                     app.is_bg[x].cir = app.style.recmd.off.cir, app.is_bg[x].sub = app.style.recmd.off.sub));
                app.is_bg[name].on = true;
                app.is_bg[name].bg = app.style.recmd.on.bg;
                app.is_bg[name].tri = app.style.recmd.on.tri;
                app.is_bg[name].cir = app.style.recmd.on.cir;
                app.is_bg[name].sub = app.style.recmd.on.sub;
            },
            show: name => {
                let ls = ['news', 'notice', 'weibo'];
                ls.filter(x => x !== name).map(x => (app.is_show[x] = false, app.is_border[x] = {}));
                app.is_show[name] = true;
                app.is_border[name] = app.style.border;
            },
            change_link: e => {
                app.link.map(x => x.show === true ? (x.show = false, x.selected = {}) : '');
                e.show = true;
                e.selected = app.style.selected;
            }
        },
        filters: {
            fixed_len: (value, len) => value.length > len ? value.substr(0, len) : value,
            cut: (value, len) => value.length > len ? value.substr(0, len) + '...' : value,
            show_date: value => value.getFullYear() + '-' + (value.getMonth() + 1) + '-' + value.getDate(),
            format_date: value => {
                let res = value.split('-').reduce((res, e, i) => res += e.length === 1? '0' + e + '-' : e + '-', '');
                return res.substr(0, res.length - 1);
            }
        }
    })
</script>
</body>
</html>