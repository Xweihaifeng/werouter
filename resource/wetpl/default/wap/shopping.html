<!--发现——商品-->
<#extend#>public/domain/domain_extend.html</#extend#>
<link rel="stylesheet" href="{{PATH_TML}}css/home.css" />
<link rel="stylesheet" href="{{PATH_TML}}css/common.css"/>
<link rel="stylesheet" href="{{PATH_TML}}css/shopping.css"/>
<div class="section">
<slide v-for="item in list">
	<slide class="li_img_wap">
		<a href="'/' + item.domain + '/wecard'">
			<img class="lazy" :src="item.avatar | imgSet(36, 36)" width="60" height="60">
		</a>
	</slide>
	<slide class="li_info">
		<h2>{{item.nickname}}</h2>
		<h3>{{item.motto}}</h3>
		<div class="lii_img">
			<img class="lazy" v-for="x in JSON.parse(item.other).picture.split(',')" :src="x | imgSet(102, 97, 1)" width="102" height="97" />
		</div>
		<div class="lii_sold">
			<a href="'/' + item.domain + '/wemall/goods/' + JSON.parse(item.other).weid">
				<slide class="li_img_wap">
					<img class="lazy" :src="JSON.parse(item.other).cover | imgSet(55, 55, 1)" />
				</slide>
				<slide class="li_info">
					<h3>{{JSON.parse(item.other).title}}</h3>
					<p class="lii_sold"><span> 已售：{{JSON.parse(item.other).sales_num}} </span><span> 收藏：{{JSON.parse(item.other).collections}} </span></p>
					<div class="lii_price">￥：<span>{{JSON.parse(item.other).price}}</span></div>
				</slide>
			</a>
		</div>
		<div class="lii_eval">
			<span class="lii_time">{{JSON.parse(item.other).updated_at | formateTime('HM')}}</span>
			<img src="/common/img/review.svg" alt="" style="width: 0.16rem;height: 0.16rem;">
		</div>
	</slide>
</slide>
</div>
<script type="text/javascript">
    new Vue({
        el: '#app',
        data : {
            list:[],
            page : 1,
            limit : 10,
            page_count : 0,
            type : 2,
            dynamic_type : 4,
        },
        mounted() {
            this.$nextTick(()=>{
                $('#app').dropload({
                    scrollArea : $('#app'),
                    loadDownFn : (dropload)=>{
                        this.data_list(dropload);
                    }
                });
            });
        },
        methods:{
            data_list(dropload) {
                $mob_ajax.dynamic(this.type , this.dynamic_type , this.page , this.limit ,  (res)=>{
					console.log(res);
                    setTimeout(()=>{
                        this.list = this.list.concat(res.data.list);
                        // 插入数据到页面，放到最后面
                        dropload.resetload();
                        this.page++;
                    },500);

                    if(res == false)
                    {
                        // dropload.resetload();
                        // 锁定
                        dropload.lock();
                        // 无数据
                        dropload.noData();
                        return false;
                    }
                    if(res.data.params.pageCount == res.data.params.currPage)
                    {
                        dropload.lock();

                        dropload.noData();
                        return false;
                    }

                });
            }
        }
    });
</script>



<!--<!DOCTYPE html>-->
<!--<html>-->

	<!--<head>-->
		<!--<meta charset="utf-8">-->
		<!--<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />-->
		<!--<link rel="shortcut icon" id="favicon" href="" />-->
		<!--<title> 商品 </title>-->

		<!--<link rel="stylesheet" href="{{PATH_TML}}css/home.css" />-->
		<!--<link rel="stylesheet" href="{{PATH_TML}}css/common.css"/>-->
		<!--<link rel="stylesheet" href="/common/jquery.animsition/css/animsition.min.css">-->
		<!--<link rel="stylesheet" href="{{PATH_TML}}js/layui/css/layui.css"/>-->
		<!--<link rel="stylesheet" href="{{PATH_TML}}css/shopping.css" />-->

		<!--<script type="text/javascript" src="{{PATH_TML}}js/jquery-3.2.1.min.js"></script>-->
		<!--<script src="{{PATH_TML}}js/vue.min.js"></script>-->
		<!--<script type="text/javascript" src="{{PATH_CONFIG}}"></script>-->
		<!--<script src="{{PATH_TML}}js/layui/layui.js"></script>-->
		<!--<script src="/common/jquery.animsition/js/jquery.animsition.min.js"></script>-->
		<!--<script src="/common/jquery-lazyload/jquery.lazyload.js"></script>-->
		<!--&lt;!&ndash;<script type="text/javascript" src="/common/layer-v3.0.3/layer-v3.0.3/layer/layer.js"></script>&ndash;&gt;-->
		<!--&lt;!&ndash; <script type="text/javascript" src="{{PATH_TML}}interface/shopping.js" ></script> &ndash;&gt;-->
	<!--</head>-->

	<!--<body class="animsition">-->
		<!--<nav></nav>-->
		<!--<div id="container" class="section" style="margin-top: 0.4rem;"></div>-->
		<!--<footer></footer>-->
		<!--<script type="text/javascript" src="{{PATH_TML}}interface/shopping.js"></script>-->
		<!--&lt;!&ndash;<script type="text/javascript" src="{{PATH_TML}}js/shopping.js" ></script>&ndash;&gt;-->
		<!--<script type="text/javascript" src="{{PATH_TML}}js/home.js" ></script>-->
	<!--</body>-->

<!--</html>-->