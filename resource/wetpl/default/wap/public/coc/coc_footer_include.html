<footer id="footer" style="display: none;">
	<ul>
		<li :id="key" v-for="(item , key) in footer_nav" @click="open(key);">
			<div class="up" v-if="item.nav == false"></div>
			<div class="down" v-if="item.nav == false"></div>
			
			<img :src="item.select_img"  v-if="key == router" />
			<img :src="item.img"  v-else />
			
			<span v-if="item.nav != false" :class="{'footer_selecte' : key == router}">{{item.name}}</span>
		</li>
	</ul>
</footer>
<script type="text/javascript">
	// header 渲染
	function init_header(show) {
	    if(show == 'no') return false;
	    var dom_id = '#header';
	    if(show != 'yes')
	    {
	    	dom_id = '#'+show;
	    }
	    new Vue({
	        el: dom_id,
	        data: {
	            router : window.location.pathname.split('/').slice(1,2),
	            cuupage : window.location.pathname.split('/').pop(),
	            header_nav : {
	                index :{
	                    'name' : '推荐',
	                    'nav' : true,
	                },
	                article : {
	                    'name' : '文章',
	                    'nav' : true,
	                },
	                project : {
	                    'name' : '项目',
	                    'nav' : false,
	                },
	                activity : {
	                    'name' : '活动',
	                    'nav' : true,
	                },
	                wemall : {
	                    'name' : '商城',
	                    'nav' : true,
	                }
	            },
	            page : '',
	        },
	        watch: {
	            page(val)
	            {
	                if(this.cuupage != val)
	                {
	                    var mod = '';
	                    if(val != 'index')
	                    {
	                        mod = '/'+ val;
	                    }
	                    window.location.href= all_domian + this.router + mod;
	                }
	            }
	        },
	        mounted() {
	            this.$nextTick( function () {
	            	var title = '';
	                // 当根路由变成 discovery 改变导航字样
	                if(is_domain == 'no')
	                {
	                    this.header_nav.index.name = '动态';
	                    this.router = 'discovery';
	                    title = '动态';
	                    // $app.set_title('动态');
	                }
	                else
	                {
	                    this.router = pages_index;
	                    // if(pages_info.)
	                    title = pages_info.plats_show.head_title;
	                }
	                // 当俩个接点相同肯定是微主页首页
	                if(this.cuupage == this.router || this.cuupage == 'dynamic')
	                {
	                    this.cuupage = 'index';
	                }
	                else
	                {
	                	title = this.header_nav[this.cuupage].name + '-' +  title;
	                }

	                this.title(title);
	            });
	        },
	        methods:{
	        	title (title){
	        		$app.set_title(title);
	        	}
	        }
	    });
	}
	
	// footer 渲染
	function init_footer(show) {
		if(show == 'no') return false;
	    var dom_id = '#footer';
	    if(show != 'yes')
	    {
	    	dom_id = '#'+show;
	    }
		$('#footer').show();
		new Vue({
	        el: '#footer',
	        data: {
	            router : window.location.pathname.split('/').slice(1,2),
	            cuupage : window.location.pathname.split('/').pop(),
	            footer_nav : {
	                home :{
	                    'name' : '首页',
	                    'nav' : true,
	                    'login' : false,
	                    'img' : '/common/img/home.png',
	                    'select_img' : '/common/img/homeblue.png',
	                    'href' : all_domian
	                },
	                discovery : {
	                    'name' : '发现',
	                    'nav' : true,
	                    'login' : false,
	                    'img' : '/common/img/discovery.png',
	                    'select_img' : '/common/img/discoveryblue.png',
	                    'href' : all_domian + 'discovery/dynamic'
	                },
	                add : {
	                    'name' : '添加',
	                    'nav' : false,
	                    'login' : false,
	                    'img' : '/common/img/add.png',
	                    'select_img' : '/common/img/add.png',
	                    'href' : false
	                },
	                message : {
	                    'name' : '消息',
	                    'nav' : true,
	                    'login' : false,
	                    'img' : '/common/img/message.png',
	                    'select_img' : '/common/img/messageblue.png',
	                    'href' : all_domian + 'message'
	                },
	                user : {
	                    'name' : '我的',
	                    'nav' : true,
	                    'login' : true,
	                    'img' : '/common/img/user.png',
	                    'select_img' : '/common/img/userblue.png',
	                    'href' : all_domian + 'user'
	                }
	            },
	            page : '',
	        },
	        mounted() {
	            this.$nextTick( function () {
	            	if(is_domain == 'yes')
	            	{
	            		this.router = 'home';
	            	}
	            });
	        },
	        methods:{
	        	open(val)
	        	{
	        		if(this.cuupage != val)
	                {
	                	var select = this.footer_nav[val];
	                	if(select.login == true)
	                	{
	                		if(is_login != 'yes')
	                		{
	                			mb_login(select.href);
	                			return ;
	                		}
	                	}
	                    window.location.href= select.href;
	                }
	        	}
	        }
	    });
	}
	
	init_header(show.header);
	init_footer(show.footer);
</script>
</body>