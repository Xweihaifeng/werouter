<#extend#>public/domain/domain_extend.html</#extend#>
<script type="text/javascript">
    show.header = 'no';
    show.footer = 'no';
</script>
<link rel="stylesheet" href="{{PATH_TML}}css/order.css">

<header>
    <span>确认订单</span>
    <a class="back" href="javascript:void(0)" ></a>
</header>
<div class="main">
    <div  class="address" @click="get_address_list">
        <div>
            <p>收货人 ：{{order_address_default.name}}  {{order_address_default.name}}</p>
            <p>收货人 ：{{order_address_default.province_name}} {{order_address_default.area_name}} {{order_address_default.detail}}</p>
        </div>
    </div>
</div>

<script>

new Vue({
    el: "#app",
    data : {
        'order_detail' : {},
        'order_sell_list' : [],
        'order_address_list' : [],
        'order_address_default' : {},
    },
    mounted: function(){
        this.$nextTick(()=>{
            this.get_address_list();
        });
    },
    methods:{
        // 获取全部收货地址
        get_address_list()
        {
            ajax.get('users/address/list').then((res)=>{
                this.order_address_list = res.data.list;

                if(this.order_address_list.length > 0)
                {

                    // 遍历元素获取默认的收货地址.
                    for(var item of this.order_address_list)
                    {
                        if(item.status == 1)
                        {
                            this.order_address_default = item;
                            break;
                        }
                    }

                    // 如果没有默认收货地址,获取第一条收货地址
                    if($app.empty(this.order_address_default) == false)
                    {
                        this.order_address_default = this.order_address_default[0];
                    }
                }

                //用户没有收货地址,发起添加收货地址
                if($app.empty(this.order_address_default) == false){
                    this.add_address();
                }
            });
        },
        // 添加收货地址方法
        add_address()
        {   
            
        },
        // 修改收货地址
        up_address()
        {

        },
        // 删除收货地址
        del_address()
        {
            
        }
    }
});

</script>
</body>
</html>