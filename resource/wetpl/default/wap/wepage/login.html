<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="shortcut icon" id="favicon" href="" />
    <link rel="stylesheet" href="{{PATH_TML}}wepage/css/home.css"/>
    <link rel="stylesheet" href="{{PATH_TML}}wepage/css/common.css"/>
    <script src="{{PATH_TML}}wepage/js/zepto.min.js"></script>
    <script src="{{PATH_TML}}wepage/js/vue.min.js"></script>
    <script src="{{PATH_TML}}wepage/js/layui/layui.all.js"></script>
    <script type="text/javascript" src="{{PATH_CONFIG}}"></script>
    <script src="{{PATH_TML}}wepage/js/home.js"></script>
    <title>登录</title>
</head>
<body style="background: #ffffff; overflow: hidden;">
    <div id="app">
        <div id="login">
            <a href="/my-activity"><img id="goback" src="/common/img/return.png" /></a>
            <p>手机账号登录</p>
            <img id="user" src="/common/img/user.svg" width="20" />
        </div>
        <div id="login-info">
            <ul>
                <li id="phonenum">
                    <span>+86 <img src="/common/img/downarrow.png" alt=""/></span>
                    <input type="text" placeholder="请输入手机号码" maxlength="11" v-model="phone"/>
                </li>
                <li id="checknum">
                    <input type="text" placeholder="请输入手机验证码" maxlength="6" v-model="check"/>
                    <span @click="getCheck">{{ info }}</span>
                </li>
                <li id="forget">
                    <span></span>
                    <span>忘记密码？</span>
                </li>
                <li id="login-bt" @click="login"><p>登录</p></li>
            </ul>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                phone: '',
                check: '',
                info: '获取验证码',
                lock: false
            },
            created: function() {
                let self = this;

            },
            methods: {
                getCheck: function() {
                    let self = this;
                    let count = 59;
                    if (!self.lock) {
                        let evt = setInterval(function () {
                            self.lock = true;
                            if (count > 0) {
                                self.info = count-- + '秒';
                            } else {
                                self.info = '重新发送验证码';
                                self.lock = false;
                                clearInterval(evt);
                            }
                        }, 1000)
                    }
                },
                login: function() {
                    let self = this;
                    let phonenum = self.phone;
                    if (/^1[3|4|5|7|8][0-9]{9}$/.test(phonenum)) {
                        //request login api
                    } else {
                        layer.msg("请输入正确的手机号码", {
                            time: 1500
                        })
                    }

                }

            }
        })
    </script>
</body>
</html>